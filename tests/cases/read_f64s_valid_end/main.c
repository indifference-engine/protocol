#include <stdint.h>
#include "../../helpers/main.h"
#include "../../../src/read_f64s.h"

void test()
{
  double actual_f64s[] = {12.49f, -28.4f, 199.0f};
  uint8_t actual_buffer[] = {0x08, 0xe5, 0xae, 0xb6, 0x62, 0x7f, 0x55, 0x93, 0xca, 0xc0, 0x28, 0xd2, 0xfd, 0x26, 0x87, 0x27, 0x46, 0xc1, 0xe9, 0x5f, 0x92, 0xca, 0x14, 0x73, 0x40, 0xbf};

  assert(read_f64s(actual_buffer, 26, actual_f64s, 3, 2), "read_f64s valid_end");

  const double expected_f64s[] = {-13606.667950, -2903822.304621, -0.000502};
  assert_f64s(expected_f64s, actual_f64s, 3, "read_f64s valid_end f64s");
  const uint8_t expected_buffer[] = {0x08, 0xe5, 0xae, 0xb6, 0x62, 0x7f, 0x55, 0x93, 0xca, 0xc0, 0x28, 0xd2, 0xfd, 0x26, 0x87, 0x27, 0x46, 0xc1, 0xe9, 0x5f, 0x92, 0xca, 0x14, 0x73, 0x40, 0xbf};
  assert_u8s(expected_buffer, actual_buffer, 26, "read_f64s valid_end buffer");
}
